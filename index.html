<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TC KIMLIK ODEV</title>
</head>
<body>
    <input type="text" id="userInput">
    <button onclick="dogrulama(userInput)"></button>
    <hr>
    <label id="sonuc">
    </label>

    <script>
        var TCKimlikOrnek='48796472298';

        dogrulama(TCKimlikOrnek);

        function dogrulama(ornek){
            var ornek=document.getElementById('userInput').value;
            sonuc.innerText='';
            while(ornek){
            if (ornek.length==11 && ornek[0] !='0'){
                let i=0;
                while(i<ornek.length){
                    switch(ornek[i]){
                        case '0':
                            i++;
                            break;
                        case '1':
                            i++;
                            break;
                        case '2':
                            i++;
                            break;
                        case '3':
                            i++;
                            break;
                        case '4':
                            i++;
                            break;
                        case '5':
                            i++;
                            break;
                        case '6':
                            i++
                            break;
                        case '7':
                            i++;
                            break;
                        case '8':
                            i++;
                            break;
                        case '9':
                            i++;
                            break;
                        default:
                            i=12;
                            sonuc.innerText+="TC KIMLIK NO SADECE RAKAM ICERIR";
                            break;
                    }
                }
                if(i!=12){
                basamakSaglamasi(ornek)
                }
            }
            else{
                sonuc.innerText+='TC kimlik numarasi 11 rakamli olmak zorundadir';
            }
            break;
        }

            

            
        }
        function basamakSaglamasi(ornek){
            let i=0;
            let tekBasamak=0;
            let ciftBasamak=0;
            while(i<ornek.length-2){
                if((i+1)%2 == 1){
                    tekBasamak+=parseInt(ornek[i]);
                }
                else{
                    ciftBasamak+=parseInt(ornek[i]);
                }
                i++;
            }
        
            tekBasamak*=7;
            
            if ((tekBasamak-ciftBasamak)%10 == parseInt(ornek[9])){
                sonKontrol(ornek)

           }
           else{
                sonuc.innerText+=ornek+" Gecersiz TC Kimlik nodur";
                console.log("TC gecersiz");
           }

        }
        function sonKontrol(ornek){
            let OnHane=0;
            let SonRakam=parseInt(ornek[10]);

            for(let i=0;i<ornek.length-1;i++){
                OnHane+=parseInt(ornek[i]);
            }
            if (OnHane % 10 == SonRakam){
                console.log('TC Gecerli');
                sonuc.innerText+=ornek+" GECERLI BIR TC NODUR";
            }
            else{
                console.log('tc Gecersiz');
                sonuc.innerText+=ornek+" Gecersiz Bir TC Kimlik nodur";
            }

        }    
        </script>
</body>
</html>
